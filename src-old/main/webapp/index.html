<!DOCTYPE html>
<html>
<head>
    <title>Shelf -- SCRUM tool for Mencius</title>

    <link href="deps/bootstrap/bootstrap-3.3.5.min.css" rel="stylesheet">
    <link rel="stylesheet" href="deps/quill.snow.css" />
    <style type="text/css">
        html, body {height: 100%;}
    </style>
    <base href="/">
    <script src="deps/es6-shim-0.35.0.min.js"></script>
    <script src="deps/system-polyfills-0.19.20.min.js"></script>
    <script src="deps/shims_for_IE.js"></script>
    <script src="deps/angular/2.0.0-beta.17/angular2-polyfills.min.js"></script>
    <script src="deps/system-0.19.26.min.js"></script>
    <script src="deps/typescript-1.8.10.js"></script>
    <script src="deps/angular/2.0.0-beta.17/Rx.min.js"></script>
    <script src="deps/angular/2.0.0-beta.17/angular2.min.js"></script>
    <script src="deps/angular/2.0.0-beta.17/http.min.js"></script>
    <script src="deps/angular/2.0.0-beta.17/router.min.js"></script>

</head>

<body>
    <div style="height:100%;"shelf-app>
        <div style="position: relative;top: 50%;left: 50%;margin-left: -36px;margin-top: -36px;">
            <img src="spin.gif"/>
        </div>
    </div>
    <script>
        System.config({
            defaultExtension: 'ts',
            transpiler: 'typescript',
            typescriptOptions: {
                emitDecoratorMetadata: true
            },
            "paths": {
                "moment": "deps/moment-2.12.0.min.js",
                "quill": "deps/quill-0.20.1.js"
            }
        });

        var systemNormalize = System.normalize;
        System.normalize = function (dep, parent) {
            var System = this;
            return systemNormalize.call(this, dep, parent)
                    .then(function (normalized) {
                        if ((parent && (parent.slice(-3) == '.ts')) && (dep[0] == ".")) {
                            var depname = dep.slice(dep.lastIndexOf("/"));
                            if (depname.indexOf('.') < 0 ||
                                    depname.indexOf('.component') > 0 ||
                                    depname.indexOf('.directive') > 0 ||
                                    depname.indexOf('.service') > 0 ||
                                    depname.indexOf('.class') > 0)
                                normalized = normalized + '.ts';
                        }

                        if ((normalized.slice(-6) == '.ts.js') || (normalized.slice(-6) == '.js.ts'))
                            normalized = normalized.slice(0, normalized.length - 6) + ".ts";

                        return normalized;
                    });
        };
        System.import('app/shelf.ts').then(null, console.error.bind(console));
    </script>
    </body>
</html>